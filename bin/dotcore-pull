#!/usr/bin/env bash

#
# Pull latest dotfiles
#

set -e

should-run -m 1h $0 || exit 0

$(shim) && cd ${DOTCORE_DIR} && . bin/i.sh
if ! command -v git &>/dev/null; then
  log::warn "git not installed, skipping dotcore pull"
else
  cd ${DOTCORE_DIR}
  if [[ -d .git ]]; then
    log:: "pulling latest version of dotfiles"
    printf "\e[35m"
    git pull
    printf "\e[0m"
  else
    log:: ".dotfiles is not a git directory, not updating"
  fi
fi

should-run -fu $0
